# 房间分配打印页面优化交接文档

> 最后更新：2025-11-14 · 负责人：GPT-5.1 Codex

## 1. 背景与目标
- 页面路径：`/allocations/print`
- 需求重点：提升信息可读性、打印友好性、界面一致性，并遵循 `frontend-new/.claude/CLAUDE.md` 前端规范。

## 2. 本轮修改范围
1. **视觉与布局**
   - 使用 CSS Modules（`AllocationPrintPage.module.css`）管理样式，替换内联 `<style jsx>`。
   - 重构房间卡片结构：房号/房型/容量置于 header，住客信息表格化展示（床位、姓名/同伴、年龄、地址）。
   - 区分“标准 / 紧凑”模式：通过不同的网格最小宽度、间距、字体和内边距控制信息密度。

2. **交互逻辑**
   - 性别筛选、布局模式切换、打印按钮等保留。
   - 移除“浏览 / 打印预览”切换，避免冗余交互，交互回归简洁。

3. **打印体验**
   - `@media print` 中控制分页、纸张尺寸（A4 纵向）、卡片分割及字体缩放，确保 PDF 导出和纸质打印可读。

## 3. 主要文件
- `src/components/allocations/AllocationPrintPage.tsx`
  - 引入 `clsx` 处理条件样式。
  - 组件结构：控制栏 → 统计头部 → 楼层分区 → 卡片网格 → 页脚。
- `src/components/allocations/AllocationPrintPage.module.css`
  - 管理所有常态与打印态样式，包含房间卡片、住客表格、楼层标题等。

## 4. 与规范的对齐
- 样式组织：CSS Modules + Tailwind（后续可逐步引入 Tailwind 原子类）。
- 代码风格：TS strict、单引号、无分号、函数式组件。
- 组件拆分：当前仍为单文件，后续如有需要可拆成子组件（房间卡片、统计头部等）。

## 5. 后续建议
1. **导出需求**：若需要 PDF 自动化导出，可接入 `react-to-print` 或服务端生成方案。
2. **数据侧优化**：前端目前一次性加载全部房间记录，如会期数据量大可考虑分页或流式渲染。
3. **样式库统一**：未来若引入 Tailwind，可将部分固定间距/颜色替换为 token，进一步统一设计语言。

## 6. 验收状态
- ✅ UI 结构与可读性显著提升。
- ✅ 打印结果与浏览状态一致，A4 适配完成。
- ✅ 交互保持简单：性别筛选、模式切换、打印按钮。
- ⏳ 尚未实现的需求：无（仅建议项非强制）。

如需新增功能或扩展打印模板，请在本文件追加版本记录与负责人信息。